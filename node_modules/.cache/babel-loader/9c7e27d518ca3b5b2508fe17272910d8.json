{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/Desktop/School/Fitness-FrontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Desktop/School/Fitness-FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/Desktop/School/Fitness-FrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{Router,Link,Route,Routes,useNavigate,useParams,BrowserRouter}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var name=props.username;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),pass=_useState2[0],setPassword=_useState2[1];var setUsername=props.setUsername;var setToken=props.setToken;var token=props.token;// const setIsLoggedIn = props.setIsLoggedIn\nvar logIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(name,pass){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://fitnesstrac-kr.herokuapp.com/api/users/login',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:name,password:pass})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;setToken(result.token);return _context.abrupt(\"return\",result);case 8:case\"end\":return _context.stop();}}},_callee);}));return function logIn(_x,_x2){return _ref.apply(this,arguments);};}();var logOut=function logOut(){setToken('');setUsername('');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex justify-content-center flex-column\",onSubmit:function onSubmit(event){event.preventDefault();logIn(name,pass);event.target.reset();},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",minLength:\"8\",onChange:function onChange(event){setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",min:\"6\",onChange:function onChange(event){setPassword(event.target.value);}}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"log in\",onClick:function onClick(event){event.target.value==='log in'?event.target.value='log out':(event.target.value='log in',logOut());}}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(Link,{to:'/login/register',className:\"btn btn-danger\",children:\"Need an account?\"})]})});};export default Login;","map":{"version":3,"names":["useEffect","useState","Router","Link","Route","Routes","useNavigate","useParams","BrowserRouter","Login","props","name","username","pass","setPassword","setUsername","setToken","token","logIn","fetch","method","headers","body","JSON","stringify","password","response","json","result","logOut","event","preventDefault","target","reset","value"],"sources":["/Users/user/Desktop/School/Fitness-FrontEnd/src/components/Login.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { Router, Link, Route, Routes, useNavigate, useParams, BrowserRouter } from \"react-router-dom\";\n\nconst Login = (props) => {\n    const name = props.username\n    const [pass, setPassword] = useState('')\n    const setUsername = props.setUsername\n    const setToken = props.setToken\n    const token = props.token\n    // const setIsLoggedIn = props.setIsLoggedIn\n\n    const logIn = async (name, pass) => {\n        const response = await fetch('http://fitnesstrac-kr.herokuapp.com/api/users/login', {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                    username: name,\n                    password: pass\n            })\n        })\n        const result = await response.json();\n\n        setToken(result.token);\n        return result\n    }\n\n    const logOut = () => {\n        setToken('');\n        setUsername('');\n    }\n\n    return (\n        <>\n            <form className='d-flex justify-content-center flex-column' onSubmit={(event) => {\n                event.preventDefault()\n                logIn(name, pass)\n                event.target.reset()\n            }\n            }>\n                <label htmlFor='username'>Username: </label>\n                <input type='text' id='username' minLength='8' onChange={(event) => {\n                    setUsername(event.target.value)\n                }\n                }></input>\n                <label htmlFor='password'>Password: </label>\n                <input type='password' id='password' min='6' onChange={(event) => {\n                    setPassword(event.target.value)\n                }\n                }></input>\n                {\n\n                    <><input type='submit' value='log in' onClick={(event) => {\n                        event.target.value === 'log in' ? event.target.value = 'log out'\n                            : (event.target.value = 'log in', logOut())\n                    }\n\n                    } ></input><br /></>\n\n                }\n\n\n                <Link to={'/login/register'} className='btn btn-danger'>Need an account?</Link>\n            </form>\n\n        </>\n    )\n}\n\nexport default Login"],"mappings":"mZAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,MAAM,CAAEC,IAAI,CAAEC,KAAK,CAAEC,MAAM,CAAEC,WAAW,CAAEC,SAAS,CAAEC,aAAa,KAAQ,kBAAkB,CAAC,6IAEtG,GAAMC,MAAK,CAAG,QAARA,MAAK,CAAIC,KAAK,CAAK,CACrB,GAAMC,KAAI,CAAGD,KAAK,CAACE,QAAQ,CAC3B,cAA4BX,QAAQ,CAAC,EAAE,CAAC,wCAAjCY,IAAI,eAAEC,WAAW,eACxB,GAAMC,YAAW,CAAGL,KAAK,CAACK,WAAW,CACrC,GAAMC,SAAQ,CAAGN,KAAK,CAACM,QAAQ,CAC/B,GAAMC,MAAK,CAAGP,KAAK,CAACO,KAAK,CACzB;AAEA,GAAMC,MAAK,4FAAG,iBAAOP,IAAI,CAAEE,IAAI,8JACJM,MAAK,CAAC,qDAAqD,CAAE,CAChFC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACbZ,QAAQ,CAAED,IAAI,CACdc,QAAQ,CAAEZ,IAClB,CAAC,CACL,CAAC,CAAC,QATIa,QAAQ,qCAUOA,SAAQ,CAACC,IAAI,EAAE,QAA9BC,MAAM,eAEZZ,QAAQ,CAACY,MAAM,CAACX,KAAK,CAAC,CAAC,gCAChBW,MAAM,wDAChB,kBAfKV,MAAK,gDAeV,CAED,GAAMW,OAAM,CAAG,QAATA,OAAM,EAAS,CACjBb,QAAQ,CAAC,EAAE,CAAC,CACZD,WAAW,CAAC,EAAE,CAAC,CACnB,CAAC,CAED,mBACI,sCACI,cAAM,SAAS,CAAC,2CAA2C,CAAC,QAAQ,CAAE,kBAACe,KAAK,CAAK,CAC7EA,KAAK,CAACC,cAAc,EAAE,CACtBb,KAAK,CAACP,IAAI,CAAEE,IAAI,CAAC,CACjBiB,KAAK,CAACE,MAAM,CAACC,KAAK,EAAE,CACxB,CACC,wBACG,cAAO,OAAO,CAAC,UAAU,wBAAmB,cAC5C,cAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAE,kBAACH,KAAK,CAAK,CAChEf,WAAW,CAACe,KAAK,CAACE,MAAM,CAACE,KAAK,CAAC,CACnC,CACC,EAAS,cACV,cAAO,OAAO,CAAC,UAAU,wBAAmB,cAC5C,cAAO,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAE,kBAACJ,KAAK,CAAK,CAC9DhB,WAAW,CAACgB,KAAK,CAACE,MAAM,CAACE,KAAK,CAAC,CACnC,CACC,EAAS,cAGN,wCAAE,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAE,iBAACJ,KAAK,CAAK,CACtDA,KAAK,CAACE,MAAM,CAACE,KAAK,GAAK,QAAQ,CAAGJ,KAAK,CAACE,MAAM,CAACE,KAAK,CAAG,SAAS,EACzDJ,KAAK,CAACE,MAAM,CAACE,KAAK,CAAG,QAAQ,CAAEL,MAAM,EAAE,CAAC,CACnD,CAEC,EAAU,2BAAM,GAAG,cAKxB,KAAC,IAAI,EAAC,EAAE,CAAE,iBAAkB,CAAC,SAAS,CAAC,gBAAgB,8BAAwB,GAC5E,EAER,CAEX,CAAC,CAED,cAAepB,MAAK"},"metadata":{},"sourceType":"module"}